
.ad l

.TH battach 1 "July 2021" "" ""
.ll 72

.ce 1000
\fBbattach\fR
.ce 0

.sp 2
Runs a shell process to connect to an existing job execution host
or container.
.sp 2

.SH Synopsis

.sp 2
\fBbattach\fR [\fB-m\fR "host_name"] [\fB-L\fR "shell_path"]
job_ID | job_ID[index_list]
.sp 2
\fBbattach\fR [\fB-h\fR | \fB-V\fR]
.SH Description

.sp 2
Use the battach command to directly connect (attach) to an
execution host or Docker container for the specified job for
debugging purposes, or for general connectivity. Once connected,
you can run shell commands from the interactive command line.
.sp 2
battach runs the interactive /bin/sh shell by default as the job
submission user on the execution host to manage input and output
between the user and the job execution host. Use the -L option to
specify an alternate shell. LSF puts the shell process that
battach starts into the job cgroup on the execution host. The
shell process owner is the job submission user.
.sp 2
For non-Docker sequential jobs, the battach command attaches to
the job execution host. For non-Docker parallel jobs, the battach
command attaches to the first execution host, or use the battach
-m command option to attach to the specified execution host.
.sp 2
For Docker sequential jobs, there is one job container on the
execution host. battach runs the \fRdocker exec
\fIjob_container_id\fR\fR command to attach to the job container
as the job submission user to manage input and output between the
user and the job execution host. LSF puts the shell process that
battach starts into the job cgroup on the execution host. The
process owner is the starter or context user that is defined in
the corresponding application profile.
.sp 2
For Docker parallel jobs, there are two types of containers on
the execution host: single-job containers, and multi-task
containers. By default, battach also runs the \fRdocker exec
\fIjob_container_id\fR\fR command to attach to the job container
as the job submission user to manage input and output between the
user and the job execution host. To attach to a task container,
specify the -m option and battach attaches to the task container
with the smallest task ID by running the \fRdocker exec
\fItask_container_id\fR\fR command and managing input and output
between the user and the job execution host, with the job
submission user as the login user. LSF puts the shell process
that battach starts into the task cgroup on the execution host.
The process owner is the starter or context user that is defined
in the corresponding application profile.
.SH Options

.sp 2
\fB-m "\fIexecution_host\fB"\fR
.br
         For parallel jobs, specifies the job execution host (for
         non-Docker jobs) or the job container on the job
         execution host (for Docker jobs) to which battach
         connects. The host that you specify must be one of the
         job execution hosts for the parallel job.
.sp 2
\fB-L "\fIshell_path\fB"\fR
.br
         Specifies the shell that battach launches in the job
         execution host or container. The path that you specify
         must be an absolute file path. Relative file paths are
         not valid. If you specify a binary file instead of a
         shell, battach runs the specified binary file and exits.
.sp 2
         By default, this is the /bin/sh shell. If the
         \fBLSB_BATTACH_DEFAULT_SHELL\fR environment variable is
         defined, \fBLSB_BATTACH_DEFAULT_SHELL\fR overrides this
         default value, and the battach -L command option
         overrides the value of the
         \fBLSB_BATTACH_DEFAULT_SHELL\fR environment variable.
.sp 2
\fB\fIjob_id\fB | \fIjob_id\fB[\fIjob_index\fB]\fR
.br
         Connects to the job execution host or container for this
         job ID or job array element. You cannot specify a job
         array, nor can you specify a job that is not running.
.sp 2
\fB-h \fR
.br
         Prints command usage to stderr and exits.
.sp 2
\fB-V \fR
.br
         Prints product release version to stderr and exits.