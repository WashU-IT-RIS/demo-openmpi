
.ad l

.TH patchinstall 8 "July 2021" "" ""
.ll 72

.ce 1000
\fBpatchinstall\fR
.ce 0

.sp 2
UNIX only. Manage patches in LSF cluster.
.sp 2

.SH Synopsis

.sp 2
\fBpatchinstall\fR [\fB-f\fR env_file] [\fB--silent\fR] package
 ...
.sp 2
\fBpatchinstall\fR \fB-c\fR [\fB-f\fR env_file] [\fB--silent\fR]
package ...
.sp 2
\fBpatchinstall\fR \fB-r\fR [\fB-f\fR env_file] [\fB--silent\fR]
package
.sp 2
\fBpatchinstall\fR \fB-r\fR [\fB-f\fR env_file] [\fB--silent\fR]
build_number
.sp 2
\fBpatchinstall -h\fR
.SH Description

.sp 2
Permission that is required to run this command depends on the
package contents and the original cluster installation account.
You normally log on as root to run the patchinstall command, but
you can patch some binary files as cluster administrator
(\fRlsfadmin\fR).
.sp 2
By default, the command installs one or more packages in an
existing cluster.
.sp 2
The cluster location is normally determined by your environment
setting, so ensure that your environment is set before you run
this command (for example, you sourced the cshrc.lsf or
profile.lsf file).
.sp 2
Specify the packages that you want to install.
.sp 2
The installer does some checking first. If it does not find a
problem, it prompts you to proceed with installation. If you
confirm, it backs up the current binary files to the patch backup
directory and then installs the specified packages on the
cluster, updating or adding new binary files. It does not modify
any existing configuration files. If the installation of a
package has problems, it automatically rolls back to the
clusterâ€™s previous state. It records the changes in the patch
history directory. This additional checking can take more time
than installing with lsfinstall.
.sp 2
The command can also be used to check or roll back a patch:
.sp 2
\fBCheck\fR
.br
         Do the checking for the packages without installing
         them. For more information, see the -c option.
.sp 2
\fBRoll back\fR
.br
         Remove the most recent patch and return the cluster to
         the previous patch level. To roll back multiple
         versions, you must roll back one patch level at a time,
         in the reverse order of installation. For more
         information, see the -r option.
.sp 2

.sp 2
If you want to enable installation through AFS, take the
following steps.
.sp 2
1. Modify patchinstall to set the environment.
.sp 2
   For the following original settings:
.sp 2
   CHOWN="chown" 
.br
   CHMOD="chmod" 
.br
   IGNORECHECKFILEOWNER="n" 
.br

.sp 2
   Set the following environment:
.sp 2
   CHOWN="asudo chown" 
.br
   CHMOD="asudo chmod" 
.br
   IGNORECHECKFILEOWNER="y" 
.br

.sp 2

.sp 2
2. Create an environment file where all LSF paths point to the
   volrw instead of volro.
.sp 2
3. Run the following command:
.sp 2
   patchinstall -f environment_file package
.sp 2
   The path to \fIenvironment_file\fR must include the correct
   LSF_TOPDIR installation directory.
.SH Options

.sp 2
\fB-c \fR
.br
         Check as if to install, but do not proceed with
         installation.
.sp 2
         Specify each package that you want to check. You can
         specify multiple packages.
.sp 2
         Checks that the existing cluster is compatible with the
         patch (the same version of the product is already
         installed on the same binary types). Fixes and fix packs
         might also require installation of a specific
         enhancement pack.
.sp 2
         Checks that your user account has permission to write to
         the installation directory, backup directory, and
         history directory.
.sp 2
         Lists existing files that are overwritten by the patch.
.sp 2
         Lists files that to be added by the patch.
.sp 2
\fB-f \fIenv_file\fB\fR
.br
         Use This option only if you cannot set your environment
         (for example, you cannot source cshrc.lsf or
         profile.lsf).
.sp 2
         Specify the full path and file name of a file (such as
         your LSF install.config file) that properly defines the
         parameter LSF_TOP.
.sp 2
         If you use this option, the command gets the cluster
         location from this file, not from the settings in your
         environment.
.sp 2
\fB-h\fR
.br
         Outputs command usage and exits.
.sp 2
\fB-r \fR
.br
         Rollback. You must specify the most recently installed
         patch. The installer checks all binary types and finds
         all instances where the most recently installed patch
         has the same build number. These packages are removed
         and the cluster reverts to the previous patch level.
.sp 2
         Specify the build number of the most recent patch or
         specify full path to the package you used to install the
         most recent patch. The installer automatically checks
         the package to determine the build. You cannot specify
         any other build.
.sp 2
         To remove multiple patches and roll back multiple
         versions, you must run the command multiple times and
         roll back one patch level at a time.
.sp 2
         You cannot roll back if the backup files from the
         previous patch level are unavailable (if you deleted
         them from the patch backup directory).
.sp 2
\fB--silent\fR
.br
         Silent mode. Install or roll back without any
         interactive prompts for confirmation.
.SH Output

.sp 2
Status information and prompts are displayed in your command
console.
.sp 2
When you patch or roll back the cluster, status information is
logged to the patch.log file. When you check a package, status
information is logged to the precheck.log file.
.sp 2
If any problems are found when you check a package, errors are
displayed in your command console and also logged to the
patch.err file.
.SH See also

.sp 2
\fBpversions command\fR
.br
         Displays the patch level of products that are installed
         in your cluster.
.sp 2
\fBinstall.config file\fR
.br
         Defines the parameter \fBLSF_TOP\fR.
.sp 2
\fBpatch.conf file\fR
.br
         Defines backup and history directories.